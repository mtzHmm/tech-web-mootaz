<form #bookForm="ngForm" (ngSubmit)="onSubmit(bookForm)" class="book-form" novalidate>
  <!-- Titre du livre -->
  <div class="form-group">
    <label for="title">Titre du livre *</label>
    <input 
      id="title"
      name="title"
      type="text" 
      class="form-control"
      [(ngModel)]="formData.title"
      #titleInput="ngModel"
      required
      minlength="2"
      placeholder="Entrez le titre du livre">
    
    <div *ngIf="showErrors && titleInput.invalid" class="error-message">
      <span *ngIf="titleInput.errors?.['required']">âš ï¸ Le titre est obligatoire</span>
      <span *ngIf="titleInput.errors?.['minlength']">âš ï¸ Le titre doit contenir au moins 2 caractÃ¨res</span>
    </div>
  </div>

  <!-- Auteur -->
  <div class="form-group">
    <label for="author">Auteur *</label>
    <input 
      id="author"
      name="author"
      type="text" 
      class="form-control"
      [(ngModel)]="formData.author"
      #authorInput="ngModel"
      required
      minlength="2"
      placeholder="Nom de l'auteur">
    
    <div *ngIf="showErrors && authorInput.invalid" class="error-message">
      <span *ngIf="authorInput.errors?.['required']">âš ï¸ L'auteur est obligatoire</span>
      <span *ngIf="authorInput.errors?.['minlength']">âš ï¸ Le nom de l'auteur doit contenir au moins 2 caractÃ¨res</span>
    </div>
  </div>

  <!-- Email de l'Ã©diteur -->
  <div class="form-group">
    <label for="publisherEmail">Email de l'Ã©diteur *</label>
    <input 
      id="publisherEmail"
      name="publisherEmail"
      type="email" 
      class="form-control"
      [(ngModel)]="formData.publisherEmail"
      #emailInput="ngModel"
      required
      email
      placeholder="email@editeur.com">
    
    <div *ngIf="showErrors && (emailInput.invalid || !isEmailValid())" class="error-message">
      <span *ngIf="emailInput.errors?.['required']">âš ï¸ L'email est obligatoire</span>
      <span *ngIf="emailInput.errors?.['email'] || !isEmailValid()">âš ï¸ Format d'email invalide</span>
    </div>
  </div>

  <!-- TÃ©lÃ©phone de l'Ã©diteur -->
  <div class="form-group">
    <label for="publisherPhone">TÃ©lÃ©phone de l'Ã©diteur *</label>
    <input 
      id="publisherPhone"
      name="publisherPhone"
      type="tel" 
      class="form-control"
      [(ngModel)]="formData.publisherPhone"
      #phoneInput="ngModel"
      required
      pattern="[0-9]{8}"
      placeholder="12345678 (8 chiffres)">
    
    <div *ngIf="showErrors && (phoneInput.invalid || !isPhoneValid())" class="error-message">
      <span *ngIf="phoneInput.errors?.['required']">âš ï¸ Le tÃ©lÃ©phone est obligatoire</span>
      <span *ngIf="phoneInput.errors?.['pattern'] || !isPhoneValid()">âš ï¸ Le tÃ©lÃ©phone doit contenir exactement 8 chiffres</span>
    </div>
  </div>

  <!-- Date de publication -->
  <div class="form-group">
    <label for="releaseDate">Date de publication *</label>
    <input 
      id="releaseDate"
      name="releaseDate"
      type="date" 
      class="form-control"
      [(ngModel)]="formData.releaseDate"
      #dateInput="ngModel"
      required
      [max]="getCurrentDate()">
    
    <div *ngIf="showErrors && (dateInput.invalid || !isDateValid())" class="error-message">
      <span *ngIf="dateInput.errors?.['required']">âš ï¸ La date de publication est obligatoire</span>
      <span *ngIf="!isDateValid()">âš ï¸ La date ne peut pas Ãªtre dans le futur</span>
    </div>
  </div>

  <!-- CatÃ©gorie -->
  <div class="form-group">
    <label for="category">CatÃ©gorie *</label>
    <select 
      id="category"
      name="category"
      class="form-control"
      [(ngModel)]="formData.category"
      #categoryInput="ngModel"
      required>
      <option value="">SÃ©lectionnez une catÃ©gorie</option>
      <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
    </select>
    
    <div *ngIf="showErrors && categoryInput.invalid" class="error-message">
      <span *ngIf="categoryInput.errors?.['required']">âš ï¸ La catÃ©gorie est obligatoire</span>
    </div>
  </div>

  <!-- Stock -->
  <div class="form-group">
    <label for="stock">QuantitÃ© en stock *</label>
    <input 
      id="stock"
      name="stock"
      type="number" 
      class="form-control"
      [(ngModel)]="formData.stock"
      #stockInput="ngModel"
      required
      min="0"
      placeholder="0">
    
    <div *ngIf="showErrors && stockInput.invalid" class="error-message">
      <span *ngIf="stockInput.errors?.['required']">âš ï¸ La quantitÃ© est obligatoire</span>
      <span *ngIf="stockInput.errors?.['min']">âš ï¸ La quantitÃ© ne peut pas Ãªtre nÃ©gative</span>
    </div>
  </div>

  <!-- DisponibilitÃ© -->
  <div class="form-group checkbox-group">
    <label class="checkbox-label">
      <input 
        name="isAvailable"
        type="checkbox" 
        [(ngModel)]="formData.isAvailable"
        class="checkbox-input">
      <span class="checkbox-text">âœ… Livre disponible</span>
    </label>
    <small class="help-text">Cochez si le livre est actuellement disponible Ã  la vente</small>
  </div>

  <!-- Boutons d'action -->
  <div class="form-actions">
    <button 
      type="submit" 
      class="btn btn-primary"
      [disabled]="showErrors && bookForm.invalid">
      {{ isEditing ? 'âœï¸ Mettre Ã  jour' : 'â• Ajouter le livre' }}
    </button>
    
    <button 
      type="button" 
      class="btn btn-secondary"
      (click)="onCancel()">
      {{ isEditing ? 'âŒ Annuler' : 'ğŸ”„ RÃ©initialiser' }}
    </button>
  </div>

  <!-- Indicateur de validation globale -->
  <div *ngIf="showErrors && bookForm.invalid" class="form-summary-error">
    ğŸš« Veuillez corriger les erreurs ci-dessus avant de soumettre le formulaire
  </div>
</form>
